<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Tuner</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Consolas,monospace;background:#0a0a0a;color:#00ff00;overflow:hidden}
.container{display:grid;grid-template-rows:60px 1fr 80px;height:100vh;padding:10px;gap:10px}
.header{background:#1a1a1a;border:2px solid #00ff00;padding:15px;display:flex;justify-content:space-between}
.main-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.panel{background:#1a1a1a;border:2px solid #333;padding:15px}
.panel h2{font-size:16px;color:#00ffff;border-bottom:1px solid #333;margin-bottom:10px}
button{background:#00ff00;color:#000;border:none;padding:10px 20px;font:bold 14px Consolas;cursor:pointer}
button:hover{box-shadow:0 0 20px #00ff00}
.metric-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:10px}
.metric{background:#0a0a0a;border:1px solid #333;padding:10px;text-align:center}
.metric-value{font-size:20px;font-weight:bold;color:#00ffff}
.warning{background:#ff6600;color:#000;padding:10px;font-weight:bold;text-align:center}
</style></head><body>
<div class="container">
<div class="header">
<h1>PROGRESSION TUNER</h1>
<div style="display:flex;gap:20px">
<div><span id="gen" style="color:#0ff;font-size:20px">0</span> Gen</div>
<div><span id="fit" style="color:#0ff;font-size:20px">0.00</span> Fit</div>
<div><span id="dev" style="color:#0ff;font-size:20px">CUDA</span></div>
</div></div>
<div class="main-grid">
<div class="panel"><h2>FITNESS</h2><canvas id="fc" height="200"></canvas></div>
<div class="panel"><h2>GPU</h2><canvas id="gc" height="200"></canvas></div>
<div class="panel"><h2>HARDWARE</h2>
<div class="metric-grid">
<div class="metric"><div>CPU</div><div class="metric-value" id="cpu">0%</div></div>
<div class="metric"><div>GPU</div><div class="metric-value" id="gpu">0%</div></div>
<div class="metric"><div>TEMP</div><div class="metric-value" id="temp">0C</div></div>
<div class="metric"><div>VRAM</div><div class="metric-value" id="vram">0GB</div></div>
<div class="metric"><div>RAM</div><div class="metric-value" id="ram">0GB</div></div>
<div class="metric"><div>GEN/S</div><div class="metric-value" id="gps">0</div></div>
</div><div id="warn"></div></div>
<div class="panel"><h2>EVOLUTION</h2>
<div class="metric-grid">
<div class="metric"><div>BEST</div><div class="metric-value" id="best">0.00</div></div>
<div class="metric"><div>AVG</div><div class="metric-value" id="avg">0.00</div></div>
<div class="metric"><div>POP</div><div class="metric-value" id="pop">0</div></div>
</div></div></div>
<div class="controls" style="background:#1a1a1a;border:2px solid #333;padding:15px;display:flex;gap:10px">
<button onclick="fetch('http://192.168.68.42:8000/api/evolution/start',{method:'POST'})">START</button>
<button onclick="fetch('http://192.168.68.42:8000/api/evolution/pause',{method:'POST'})">PAUSE</button>
<button onclick="fetch('http://192.168.68.42:8000/api/evolution/stop',{method:'POST'})">STOP</button>
<button onclick="fetch('http://192.168.68.42:8000/api/throttle/100',{method:'POST'})">100%</button>
<button onclick="fetch('http://192.168.68.42:8000/api/throttle/75',{method:'POST'})">75%</button>
<button onclick="fetch('http://192.168.68.42:8000/api/throttle/50',{method:'POST'})">50%</button>
</div></div>
<script>
const ws=new WebSocket('ws://192.168.68.42:8000/ws');
let lg=0,lt=Date.now();
const fc=new Chart(document.getElementById('fc'),{type:'line',data:{labels:[],datasets:[{data:[],borderColor:'#0f0',borderWidth:2}]},options:{responsive:true,maintainAspectRatio:false,animation:false,scales:{y:{max:100}},plugins:{legend:{display:false}}}});
const gc=new Chart(document.getElementById('gc'),{type:'line',data:{labels:[],datasets:[{data:[],borderColor:'#f60',borderWidth:2}]},options:{responsive:true,maintainAspectRatio:false,animation:false,scales:{y:{max:100}},plugins:{legend:{display:false}}}});
ws.onmessage=(e)=>{
const d=JSON.parse(e.data),hw=d.hardware,evo=d.evolution;
document.getElementById('gen').textContent=evo.generation.toLocaleString();
document.getElementById('fit').textContent=evo.best_fitness.toFixed(2);
document.getElementById('dev').textContent=evo.device.toUpperCase();
document.getElementById('cpu').textContent=hw.cpu_percent.toFixed(1)+'%';
document.getElementById('gpu').textContent=hw.gpu_percent+'%';
document.getElementById('temp').textContent=hw.gpu_temp+'C';
document.getElementById('vram').textContent=hw.gpu_mem_used_gb.toFixed(1)+'GB';
document.getElementById('ram').textContent=hw.ram_used_gb.toFixed(1)+'GB';
document.getElementById('pop').textContent=evo.population_size;
document.getElementById('best').textContent=evo.best_fitness.toFixed(2);
document.getElementById('avg').textContent=(evo.avg_fitness||0).toFixed(2);
const now=Date.now(),gd=evo.generation-lg,td=(now-lt)/1000;
if(gd>0){document.getElementById('gps').textContent=(gd/td).toFixed(0);lg=evo.generation;lt=now;}
if(hw.should_throttle)document.getElementById('warn').innerHTML='<div class="warning">THROTTLING: '+hw.throttle_reason+'</div>';
else document.getElementById('warn').innerHTML='';
if(fc.data.labels.length>100){fc.data.labels.shift();fc.data.datasets[0].data.shift();}
fc.data.labels.push('');fc.data.datasets[0].data.push(evo.best_fitness);fc.update('none');
if(gc.data.labels.length>100){gc.data.labels.shift();gc.data.datasets[0].data.shift();}
gc.data.labels.push('');gc.data.datasets[0].data.push(hw.gpu_percent);gc.update('none');
};
</script></body></html>
